{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport { GET_FEATURED_TODOS, GET_TODOS } from \"../queries/Todo\";\nimport { CREATE_TODO, DELETE_TODO, UPDATE_TODO } from \"../mutations/Todo\";\nexport const useTodos = ({\n  userEmail\n}) => {\n  _s();\n  const {\n    error,\n    loading: isLoading,\n    data\n  } = useQuery(GET_TODOS, {\n    variables: {\n      user_email: userEmail\n    },\n    fetchPolicy: \"cache-and-network\"\n  });\n  const todos = data === null || data === void 0 ? void 0 : data.getTodos;\n  return {\n    error,\n    todos,\n    isLoading\n  };\n};\n_s(useTodos, \"Y7e/4WBUglaZxQzpPnwNVMojz3Q=\", false, function () {\n  return [useQuery];\n});\nexport const useFeaturedTodos = ({\n  userEmail\n}) => {\n  _s2();\n  const {\n    error,\n    loading: isLoading,\n    data\n  } = useQuery(GET_FEATURED_TODOS, {\n    variables: {\n      user_email: userEmail\n    },\n    fetchPolicy: \"cache-and-network\"\n  });\n  const featuredTodos = data === null || data === void 0 ? void 0 : data.getFeaturedTodos;\n  return {\n    error,\n    featuredTodos,\n    isLoading\n  };\n};\n_s2(useFeaturedTodos, \"Y7e/4WBUglaZxQzpPnwNVMojz3Q=\", false, function () {\n  return [useQuery];\n});\nexport const useCreateTodo = () => {\n  _s3();\n  const [createTodoMutation, {\n    error,\n    loading: isLoading\n  }] = useMutation(CREATE_TODO);\n  const createTodo = ({\n    title,\n    userEmail\n  }) => {\n    createTodoMutation({\n      variables: {\n        title: title,\n        user_email: userEmail\n      },\n      update(cache, {\n        data\n      }) {\n        updateNewTodoCache({\n          cache,\n          newTodo: data.createTodo\n        });\n      }\n    });\n  };\n  return {\n    createTodo,\n    error,\n    isLoading\n  };\n};\n_s3(useCreateTodo, \"DW2A8Dy43nVhMdZN1kgDJgzAoq0=\", false, function () {\n  return [useMutation];\n});\nexport const useUpdateTodo = () => {\n  _s4();\n  const [updateTodoMutation, {\n    error,\n    loading: isLoading\n  }] = useMutation(UPDATE_TODO);\n  const updateTodo = ({\n    id,\n    title\n  }) => {\n    updateTodoMutation({\n      variables: {\n        id: id,\n        title: title\n      },\n      update(cache, {\n        data\n      }) {\n        updateTodoCache({\n          cache,\n          newTodo: data.updateTodo\n        });\n      }\n    });\n  };\n  return {\n    updateTodo,\n    error,\n    isLoading\n  };\n};\n_s4(useUpdateTodo, \"XtDbOceoNL1i5kkZHKKdc4rvdMo=\", false, function () {\n  return [useMutation];\n});\nexport const useDeleteTodo = () => {\n  _s5();\n  const [deleteTodoMutation, {\n    error,\n    loading: isLoading\n  }] = useMutation(DELETE_TODO);\n  const deleteTodo = ({\n    id\n  }) => {\n    deleteTodoMutation({\n      variables: {\n        id: id\n      },\n      update(cache, {\n        data\n      }) {\n        updateDeleteTodoCache({\n          cache,\n          deletedTodo: data.deleteTodo,\n          id\n        });\n      }\n    });\n  };\n  return {\n    deleteTodo,\n    error,\n    isLoading\n  };\n};\n_s5(useDeleteTodo, \"v/Z89l3lt78+796ylxcNe7q+B3o=\", false, function () {\n  return [useMutation];\n});\nfunction updateNewTodoCache({\n  cache,\n  newTodo\n}) {\n  const {\n    getTodos\n  } = cache.readQuery({\n    query: GET_TODOS,\n    variables: {\n      user_email: newTodo.user_email\n    }\n  });\n  cache.writeQuery({\n    query: GET_TODOS,\n    variables: {\n      user_email: newTodo.user_email\n    },\n    data: {\n      getTodos: [...getTodos, newTodo]\n    }\n  });\n}\nfunction updateTodoCache({\n  cache,\n  newTodo\n}) {\n  const {\n    getTodos\n  } = cache.readQuery({\n    query: GET_TODOS,\n    variables: {\n      user_email: newTodo.user_email\n    }\n  });\n  const updatedTodos = getTodos.map(todo => {\n    if (todo.id === newTodo.id) {\n      return newTodo;\n    }\n    return todo;\n  });\n  cache.writeQuery({\n    query: GET_TODOS,\n    data: {\n      getTodos: updatedTodos\n    }\n  });\n}\nfunction updateDeleteTodoCache({\n  cache,\n  id,\n  deletedTodo\n}) {\n  const {\n    getTodos\n  } = cache.readQuery({\n    query: GET_TODOS,\n    variables: {\n      user_email: deletedTodo.user_email\n    }\n  });\n  const updatedTodos = getTodos.filter(todo => todo.id !== id);\n  cache.writeQuery({\n    query: GET_TODOS,\n    variables: {\n      user_email: deletedTodo.user_email\n    },\n    data: {\n      getTodos: updatedTodos\n    }\n  });\n}","map":{"version":3,"names":["useMutation","useQuery","GET_FEATURED_TODOS","GET_TODOS","CREATE_TODO","DELETE_TODO","UPDATE_TODO","useTodos","userEmail","_s","error","loading","isLoading","data","variables","user_email","fetchPolicy","todos","getTodos","useFeaturedTodos","_s2","featuredTodos","getFeaturedTodos","useCreateTodo","_s3","createTodoMutation","createTodo","title","update","cache","updateNewTodoCache","newTodo","useUpdateTodo","_s4","updateTodoMutation","updateTodo","id","updateTodoCache","useDeleteTodo","_s5","deleteTodoMutation","deleteTodo","updateDeleteTodoCache","deletedTodo","readQuery","query","writeQuery","updatedTodos","map","todo","filter"],"sources":["/Users/israelromero/todoApp/client/src/graphql/hooks/todoHooks.js"],"sourcesContent":["import { useMutation, useQuery } from \"@apollo/client\";\nimport { GET_FEATURED_TODOS, GET_TODOS } from \"../queries/Todo\";\nimport { CREATE_TODO, DELETE_TODO, UPDATE_TODO } from \"../mutations/Todo\";\n\nexport const useTodos = ({ userEmail }) => {\n  const {\n    error,\n    loading: isLoading,\n    data,\n  } = useQuery(GET_TODOS, {\n    variables: {\n      user_email: userEmail,\n    },\n    fetchPolicy: \"cache-and-network\",\n  });\n\n  const todos = data?.getTodos;\n\n  return { error, todos, isLoading };\n};\n\nexport const useFeaturedTodos = ({ userEmail }) => {\n  const {\n    error,\n    loading: isLoading,\n    data,\n  } = useQuery(GET_FEATURED_TODOS, {\n    variables: {\n      user_email: userEmail,\n    },\n    fetchPolicy: \"cache-and-network\",\n  });\n\n  const featuredTodos = data?.getFeaturedTodos;\n\n  return { error, featuredTodos, isLoading };\n};\n\nexport const useCreateTodo = () => {\n  const [createTodoMutation, { error, loading: isLoading }] =\n    useMutation(CREATE_TODO);\n\n  const createTodo = ({ title, userEmail }) => {\n    createTodoMutation({\n      variables: {\n        title: title,\n        user_email: userEmail,\n      },\n      update(cache, { data }) {\n        updateNewTodoCache({ cache, newTodo: data.createTodo });\n      },\n    });\n  };\n\n  return { createTodo, error, isLoading };\n};\n\nexport const useUpdateTodo = () => {\n  const [updateTodoMutation, { error, loading: isLoading }] =\n    useMutation(UPDATE_TODO);\n\n  const updateTodo = ({ id, title }) => {\n    updateTodoMutation({\n      variables: {\n        id: id,\n        title: title,\n      },\n      update(cache, { data }) {\n        updateTodoCache({ cache, newTodo: data.updateTodo });\n      },\n    });\n  };\n\n  return { updateTodo, error, isLoading };\n};\n\nexport const useDeleteTodo = () => {\n  const [deleteTodoMutation, { error, loading: isLoading }] =\n    useMutation(DELETE_TODO);\n\n  const deleteTodo = ({ id }) => {\n    deleteTodoMutation({\n      variables: {\n        id: id,\n      },\n      update(cache, { data }) {\n        updateDeleteTodoCache({ cache, deletedTodo: data.deleteTodo, id });\n      },\n    });\n  };\n\n  return { deleteTodo, error, isLoading };\n};\n\nfunction updateNewTodoCache({ cache, newTodo }) {\n  const { getTodos } = cache.readQuery({\n    query: GET_TODOS,\n    variables: { user_email: newTodo.user_email },\n  });\n\n  cache.writeQuery({\n    query: GET_TODOS,\n    variables: { user_email: newTodo.user_email },\n    data: { getTodos: [...getTodos, newTodo] },\n  });\n}\n\nfunction updateTodoCache({ cache, newTodo }) {\n  const { getTodos } = cache.readQuery({\n    query: GET_TODOS,\n    variables: { user_email: newTodo.user_email },\n  });\n  const updatedTodos = getTodos.map((todo) => {\n    if (todo.id === newTodo.id) {\n      return newTodo;\n    }\n    return todo;\n  });\n  cache.writeQuery({\n    query: GET_TODOS,\n    data: { getTodos: updatedTodos },\n  });\n}\n\nfunction updateDeleteTodoCache({ cache, id, deletedTodo }) {\n  const { getTodos } = cache.readQuery({\n    query: GET_TODOS,\n    variables: { user_email: deletedTodo.user_email },\n  });\n  const updatedTodos = getTodos.filter((todo) => todo.id !== id);\n  cache.writeQuery({\n    query: GET_TODOS,\n    variables: { user_email: deletedTodo.user_email },\n    data: { getTodos: updatedTodos },\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}